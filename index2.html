<!doctype html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Organismo Tipografico</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#f5f3ed;
  --text:#45910e;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:'Space Grotesk',system-ui,sans-serif;
  background:var(--bg);
  color:var(--text);
}

/* ---------- HERO ---------- */

.hero{
  position:fixed;
  inset:0;
  background:var(--bg);
  z-index:10;
}

video{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  opacity:.9;
}

/* ---------- TITOLO ---------- */

.title-line{
  position:absolute;
  left:32px;
  top:50%;
  transform:translateY(24px);
  opacity:0;
  transition:
    opacity .8s ease,
    transform 1s ease,
    top 1s ease;
  cursor:pointer;
}

.title-line.visible{
  opacity:1;
  transform:translateY(0);
}

.title-line.pinned{
  position:fixed;
  top:20px;
  transform:none;
  z-index:100;
}

h1{
  margin:0;
  font-size:16px;
  font-weight:500;
  letter-spacing:.02em;
}

/* ---------- TESTO ---------- */

.foreword{
  padding:160px 7vw 180px;
}

.inner{
  max-width:820px;
  margin:0 auto;
  display:grid;
  gap:22px;
}

.foreword h2{
  font-size:clamp(24px,3vw,32px);
  border-bottom:1px solid rgba(69,145,14,.2);
  padding-bottom:10px;
}

.foreword p{
  font-size:18px;
  line-height:1.7;
}

.fade-up{
  opacity:0;
  transform:translateY(32px);
  transition:opacity 1s ease,transform 1s ease;
}

.fade-up.visible{
  opacity:1;
  transform:translateY(0);
}

/* ---------- IMMAGINI ---------- */

.image-flow{
  position:relative;
  padding:200px 0 400px;
  min-height:320vh;
}

.image-flow img{
  position:absolute;
  opacity:.92;
  transition:transform .6s ease,opacity .6s ease;
}

.image-flow img:hover{
  opacity:1;
  transform:scale(1.03);
}

.img1{width:28vw;top:0;left:8vw}
.img2{width:22vw;top:35vh;right:10vw}
.img3{width:34vw;top:70vh;left:14vw}
.img4{width:20vw;top:110vh;right:18vw}
.img5{width:26vw;top:150vh;left:6vw}
.img6{width:22vw;top:190vh;right:12vw}
.img7{width:30vw;top:230vh;left:20vw}
.img8{width:18vw;top:270vh;right:22vw}
.img9{width:28vw;top:310vh;left:10vw}

@media(max-width:900px){
  .image-flow img{
    position:static;
    width:80%;
    display:block;
    margin:70px auto;
  }
}

@media(prefers-reduced-motion:reduce){
  *{transition:none!important}
}
</style>
</head>

<body>

<!-- HERO -->
<section class="hero" id="hero">
  <video id="introVideo" autoplay muted playsinline preload="auto">
    <source src="media/intro.mp4" type="video/mp4">
  </video>

  <div class="title-line" id="title">
    <h1>Organismo Tipografico</h1>
  </div>
</section>

<!-- TESTO -->
<section class="foreword" id="foreword">
  <div class="inner">
    <h2>Premessa</h2>
    <p>
      L’apertura è essenziale. Il video respira,
      il titolo resta.
    </p>
    <p class="fade-up" id="secondText">
      Da qui il contenuto procede in avanti.
      Nessun ritorno, solo stratificazione.
    </p>
  </div>
</section>

<!-- IMMAGINI -->
<section class="image-flow">
  <img src="media/img1.jpg" class="img1">
  <img src="media/img2.jpg" class="img2">
  <img src="media/img3.jpg" class="img3">
  <img src="media/img4.jpg" class="img4">
  <img src="media/img5.jpg" class="img5">
  <img src="media/img6.jpg" class="img6">
  <img src="media/img7.jpg" class="img7">
  <img src="media/img8.jpg" class="img8">
  <img src="media/img9.jpg" class="img9">
</section>

<script>
(() => {
  const hero = document.getElementById('hero');
  const title = document.getElementById('title');
  const foreword = document.getElementById('foreword');
  const secondText = document.getElementById('secondText');
  const video = document.getElementById('introVideo');

  let done = false;

  const proceed = () => {
    if(done) return;
    done = true;

    title.classList.add('visible');

    setTimeout(() => {
      foreword.scrollIntoView({behavior:'smooth'});

      setTimeout(() => {
        secondText.classList.add('visible');
        title.classList.add('pinned'); // qui resta fisso
        hero.remove();                // hero sparisce, titolo no
      }, 600);

    }, 2200);
  };

  title.addEventListener('click', () => {
    window.scrollTo({ top: 0, behavior: 'smooth' });
  });

  window.addEventListener('DOMContentLoaded', () => {
    video.play().catch(()=>{});
    setTimeout(proceed, 6000);
  });

  video.addEventListener('ended', proceed, { once:true });
})();
</script>

</body>
</html>
