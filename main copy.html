<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <title>Organismo Tipografico - Minimalist Grid</title>

    <style>
        /* ======================
        引入自定义字体
        ====================== */
        @font-face {
            font-family: 'G15Font';
            src: url('Cell-2901.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'G15Font', Arial, sans-serif;
        }

        body {
            overflow-x: hidden;
            background-color: #f3fcf4;
            color: #2d7732;
        }

        /* ======================
        TITOLO & TEXT BLOCK
        ===================== */
        #title {
            position: absolute;
            left: 40px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
            cursor: pointer;
            z-index: 1000;
            display: flex;
            gap: 0.5em;
            color: #2d7732;
        }

        #title span {
            display: inline-block;
            opacity: 0;
            transform: translateX(-20px);
            transition: opacity 0.8s ease, transform 0.8s ease;
        }

        #title.visible span {
            opacity: 1;
            transform: translateX(0);
        }

        #title.visible span:nth-child(2) {
            transition-delay: 0.4s;
        }

        #title.fixed {
            position: fixed;
            top: 20px;
            transform: none;
            transition: top 1.2s ease;
        }

        #text-block {
            position: absolute;
            top: 100%;
            left: 400px;
            width: 450px;
            opacity: 0;
            transition: top 1.2s ease, opacity 0.8s ease;
            color: #2d7732;
        }

        #text-block p {
            font-size: 16px;
            line-height: 1.6;
            margin-bottom: 1.2em;
            text-align: justify;
        }

        /* ======================
        CONTENT GRID SYSTEM
        ====================== */
        #content {
            margin-top: 110vh;
            padding: 100px 18%;
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            grid-auto-rows: 80px;
            gap: 32px;
            justify-content: center;
            position: relative;
            z-index: 2;
        }

        .bg-image-wrapper {
            position: absolute;
            top: 110vh;
            left: 0;
            width: 100%;
            z-index: 1;
            display: flex;
            flex-direction: column;
        }

        .bg-image-wrapper img {
            width: 100%;
            display: block;
            height: auto;
        }

        /* IMAGE HOVER LOGIC */
        .image {
            width: 100%;
            align-self: stretch;
            position: relative;
            overflow: visible;
        }

        .image img {
            display: block;
            transition: opacity 0.5s ease-in-out;
        }

        .image img.img-front {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image img.img-back {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 20vw;
            height: 20vw;
            object-fit: contain;
            opacity: 0;
            z-index: 100;
            pointer-events: none;
        }

        .image:hover img.img-front {
            opacity: 0;
        }

        .image:hover img.img-back {
            opacity: 1;
        }

        /* Grid Items Positioning */
        .image:nth-child(1) {
            grid-column: 1 / span 4;
            grid-row: 3 / span 2;
        }

        .image:nth-child(2) {
            grid-column: 6 / span 6;
            grid-row: 6 / span 3;
        }

        .image:nth-child(3) {
            grid-column: 10 / span 4;
            grid-row: 1 / span 2;
        }

        .image:nth-child(4) {
            grid-column: 2 / span 4;
            grid-row: 12 / span 4;
        }

        .image:nth-child(5) {
            grid-column: 10 / span 3;
            grid-row: 11 / span 2;
        }

        .image:nth-child(6) {
            grid-column: 8 / span 9;
            grid-row: 16 / span 3;
        }

        .image:nth-child(7) {
            grid-column: 1 / span 3;
            grid-row: 20 / span 2;
        }

        .image:nth-child(8) {
            grid-column: 6 / span 4;
            grid-row: 22 / span 4;
        }

        .image:nth-child(9) {
            grid-column: 1 / span 6;
            grid-row: 29 / span 4;
        }

        .image:nth-child(10) {
            grid-column: 11 / span 5;
            grid-row: 27 / span 3;
        }

        .image:nth-child(11) {
            grid-column: 10 / span 3;
            grid-row: 33 / span 2;
        }

        .image:nth-child(12) {
            grid-column: 4 / span 4;
            grid-row: 36 / span 3;
        }

        .grid-spacer {
            grid-column: 1 / -1;
            grid-row: 39 / span 6;
            pointer-events: none;
        }

        /* ======================
        X ZOOM SECTION
        ====================== */
        #typo-noise {
            height: 100vh;
            background: #f3fcf4;
            position: relative;
            z-index: 10;
            margin-top: 150px;
        }

        #noise-container {
            position: sticky;
            top: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            padding-top: 0vh;
        }


        #zoom-x-svg text {
            font-family: 'G15Font', sans-serif;
            fill: #2d7732;
            text-anchor: middle;
            dominant-baseline: middle;
            transition: opacity 0.05s ease;
        }

        /* Fullscreen green overlay */
#green-overlay {
    position: fixed;
    inset: 0;
    background: #2d7732;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease;
    z-index: 9999;
}

#zoom-x-svg {
    width: 6px;
    height: 6px;
    will-change: width, height, transform;
    transform-origin: center center;
    position: absolute;
    left: 50%;
    top: 0; /* will be updated by JS */
    transform: translate(-50%, 0);
}

    </style>
</head>

<body>

    <div id="title">
        <span>Organismo</span>
        <span>Tipografico</span>
    </div>

    <!-- ======== TESTO RIPRISTINATO ======== -->
    <div id="text-block">
        <p>Il nostro archivio interpreta il segno grafico attraverso la lente della biologia cellulare, elevando la
            lettera a unità minima e vitale del linguaggio. Come la cellula rappresenta il mattone fondamentale della
            vita, così ogni carattere racchiude in sé un codice morfologico che si evolve e si adatta nel tempo.</p>
        <p>Attraverso questa analogia, l’archivio non si limita a catalogare forme, ma si costituisce come un vero e
            proprio organismo linguistico, dove la storia della tipografia viene riletta come un processo di sviluppo
            biologico e strutturale.</p>
        <p>Adottando il rigore scientifico della biologia moderna, analizziamo l’evoluzione dei caratteri come una serie
            di mutazioni organiche.</p>
    </div>
    <!-- ================================ -->

    <div class="bg-image-wrapper">
        <img src="image/noise.jpg" alt="bg1">
        <img src="image/111.jpg" alt="bg2">
        <img src="image/222.jpg" alt="bg3">
        <img src="image/333.jpg" alt="bg4">
        <img src="image/444.jpg" alt="bg5">
    </div>

    <div id="content">
        <div class="image"><img src="image/f4.png" class="img-front"><img src="image/www2.png" class="img-back"></div>
        <div class="image"><img src="image/f9.png" class="img-front"><img src="image/www1.png" class="img-back"></div>
        <div class="image"><img src="image/ff8.png" class="img-front"><img src="image/www0.png" class="img-back"></div>
        <div class="image"><img src="image/f6.png" class="img-front"><img src="image/www9.png" class="img-back"></div>
        <div class="image"><img src="image/f13.png" class="img-front"><img src="image/www0.png" class="img-back"></div>
        <div class="image"><img src="image/f18.png" class="img-front"><img src="image/www6.png" class="img-back"></div>
        <div class="image"><img src="image/f3.png" class="img-front"><img src="image/www4.png" class="img-back"></div>
        <div class="image"><img src="image/f12.png" class="img-front"><img src="image/www5.png" class="img-back"></div>
        <div class="image"><img src="image/ff2.png" class="img-front"><img src="image/www0.png" class="img-back"></div>
        <div class="image"><img src="image/f17.png" class="img-front"><img src="image/www8.png" class="img-back"></div>
        <div class="image"><img src="image/f7.png" class="img-front"><img src="image/www7.png" class="img-back"></div>
        <div class="image"><img src="image/ff1.png" class="img-front"><img src="image/www0.png" class="img-back"></div>
        <div class="grid-spacer"></div>
    </div>

    <section id="typo-noise">
        <div id="noise-container">
            <svg id="zoom-x-svg" viewBox="0 0 100 100">
                <text id="x1" x="50" y="50" font-size="170">x</text>
  
            </svg>
        </div>
    </section>

    <div id="green-overlay"></div>

<script>
  // ============================
  // RESET SCROLL (optional)
  // ============================
  if ('scrollRestoration' in history) {
    history.scrollRestoration = 'manual';
  }

  // ============================
  // ANIMAZIONE TESTO INIZIALE
  // ============================
  const title = document.getElementById("title");
  const textBlock = document.getElementById("text-block");

  window.addEventListener('load', () => {
    setTimeout(() => { title.classList.add("visible"); }, 300);
    setTimeout(() => {
      title.classList.add("fixed");
      textBlock.style.top = "50%";
      textBlock.style.opacity = "1";
    }, 1800);
  });

  title.addEventListener("click", () => {
    textBlock.scrollIntoView({ behavior: "smooth", block: "center" });
  });


  // ============================
  // ZOOM X AUTOMATICO (FINE PAGINA)
  // ============================
  const zoomSVG = document.getElementById("zoom-x-svg");
  const x1 = document.getElementById("x1");
  const greenOverlay = document.getElementById("green-overlay");

  let animationStarted = false;
  let start = null;
  const duration = 3500;

  function animateZoom(ts) {
    if (!start) start = ts;
    const p = Math.min((ts - start) / duration, 1);

    // Zoom X
    const max = Math.max(window.innerWidth, window.innerHeight) * 3;
    const size = 10 + Math.pow(p, 3) * max;
    zoomSVG.style.width = size + "px";
    zoomSVG.style.height = size + "px";

    // Center the X
    zoomSVG.style.position = "fixed";
    zoomSVG.style.left = "50%";
    zoomSVG.style.top = "50%";
    zoomSVG.style.transform = "translate(-50%, -50%)";

    // Green takeover
    if (p > 0.75) {
      greenOverlay.style.opacity = (p - 0.75) / 0.25;
    }

    if (p < 1) {
      requestAnimationFrame(animateZoom);
    } else {
      setTimeout(() => {
        window.location.href = "specimen copy.html";
      }, 500);
    }
  }

  // Trigger when scroll reaches bottom
  window.addEventListener("scroll", () => {
    if (animationStarted) return;

    const scrolled = window.scrollY + window.innerHeight;
    const total = document.documentElement.scrollHeight;

    if (scrolled >= total - 2) {
      animationStarted = true;
      requestAnimationFrame(animateZoom);
    }
  });
</script>

</body>

</html>
